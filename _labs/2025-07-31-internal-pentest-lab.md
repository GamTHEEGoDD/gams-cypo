---
layout: post
title: "Home Lab: Internal Network Penetration Test"
date: 2025-07-31 16:15:00 -0700
categories: pentesting homelab
permalink: /labs/internal-pentest-lab/
---

## Objective

The primary objective of this penetration test was to build a home lab and use it to practice the core phases of a penetration test. Key learning goals included network enumeration, vulneravility analysis, and understanding pathways to priviilege escalation.

## Scope

The scope of this assessment was limited to the internal network assets and infrastructure agreed upon prior to the engagement.

### In-Scope Systems

The following assets were considered in-scope for this penetration test:

* **IP Ranges:**
  * '10.10.10.0/24' (Corporate User VLAN)
  * '10.10.20.0/24' (Server VLAN)
* **Key Applications / Servers:**
  * Domain Controllers
  ('DC01.corp.local', 'DC02.corp.local')

  ### Out-of-Scope Systems

  To prevent disruption to critical business operations, the following assets were explicitly out-of-scope:

  * Any system outside of the IP ranges listed above.

## Methodology

  This penetration test was conducted following a methodology aligned with the Penetration Testing Execution Standard (PTES). The approach consisted of several distinct phases, simulating the tactics of a malicious actor with initial access to the internal network.

  ### **Tools Used**
* Nmap
* Metasploit
* Wireshark

 * **1. Information Gathering & Enumeration**
   * This initial phase involved mapping the internal network and enumerating live hosts, open ports, and running services. Tools such as Nmap were used to build a comprehensive picture of the network landscape and identify potential points of entry.

 * **2. Vulnerability Analysis**
   * Identified services and applications were analyzed for known vulnerabilities and common misconfigurations. This involved both automated scanning and manual inspection of web applications, network services, and Active Directory configurations.

* **3. Initial Exploitation**
   * This phase focused on gaining an initial foothold on a network system. Attempts were made to exploit discovered vulnerabilities or leverage weak credentials to gain unauthorized access to a user workstation or server.

 * **4. Post-Exploitation & Lateral Movement**
   * Once initial access was established, the focus shifted to expanding access within the network. This included activities such as privilege escalation on the compromised host, harvesting credentials, and moving laterally to other systems, with the ultimate goal of accessing sensitive data or key infrastructure like Domain Controllers.

 * **5. Reporting**
   * The final phase consists of compiling all findings into this comprehensive report, which details discovered vulnerabilities, their associated risks, and recommended remediation steps.
Pro Tip: You don't need to write a novel for each phase. A sentence or two describing the general activity is perfect. The highly detailed, step-by-step "story" of what you actually did and found will go in the Findings section, which comes next.

## Findings
### Finding 1: Weak User Credentials Allow Remote Access via SSH

**Description:** During the reconnaissance phase, Nmap identified an OpenSSH service running on port 22. A dictionary attack was performed against this service using the ssh_login module within the Metasploit Framework. The attack was successful and granted the tester an interactive command shell on the target system.

**Evidence:**
![successful Nmap scan](/img/portfolio/4th-lab-SH-new-kali-nmap.png)

**Analysis:**
The scan revealed that Port 22 (SSH) and Port 80 (HTTP) were open on the target. The SSH service was identified as OpenSSH version X.X...
This is a fantastic start. You've built a professional template that you can now fill in as we complete each phase of the test.

 **Impact:**
   A malicious actor could use this vulnerability to gain an initial foothold on the network. From here, they could escalate privileges, move laterally to other systems, or deploy ransomware.

 **Remediation:**
   Enforce a strong password policy for all users. Implement multi-factor authentication (MFA) on all externally facing or critical services like SSH.
